<div class="card border-dark bg-light">
  <div class="card-header">
    <div class="row">
      <div class="col-8">
        <h2 class="card-title">{{ titleMsg }}</h2>
      </div>
      <div class="col-4">
        <button
          (click)="showModal()"
          *ngIf="formChange"
          class="btn btn-info float-right"
        >
          Voltar para a lista
        </button>
        <button
          [routerLink]="['/products']"
          *ngIf="!formChange"
          class="btn btn-info float-right"
        >
          Voltar para a lista
        </button>
      </div>
    </div>
  </div>

  <div class="card-body">
    <form [formGroup]="form" class="needs-validation" novalidate>
      <div class="form-group">
        <label for="title" [ngClass]="applyCssFeedback('title')">Nome</label>
        <input
          type="text"
          [ngClass]="applyCssFeedback('title')"
          id="title"
          name="title"
          class="form-control"
          formControlName="title"
          placeholder="nome"
          required
        />
        <div class="invalid-feedback">Este campo é obrigatório</div>
      </div>

      <div class="form-group">
        <label for="price" [ngClass]="applyCssFeedback('price')">Preço</label>
        <input
          type="number"
          id="price"
          name="price"
          class="form-control"
          [ngClass]="applyCssFeedback('price')"
          formControlName="price"
          placeholder="Preço"
          required
        />
        <div class="invalid-feedback">Este campo é obrigatório</div>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          [ngClass]="applyCssFeedback('active')"
          type="checkbox"
          value=""
          name="active"
          id="active"
          formControlName="active"
          required
        />
        <div class="invalid-feedback">Este campo é obrigatório</div>
        <label
          class="form-check-label"
          [ngClass]="applyCssFeedback('active')"
          for="name"
        >
          Attivo
        </label>
      </div>

      <div class="form-group">
        <label for="description">Descrição</label>
        <textarea
          name="description"
          [ngClass]="applyCssFeedback('description')"
          id="description"
          class="form-control"
          formControlName="description"
          cols="30"
          rows="10"
          required
        ></textarea>
        <div
          class="invalid-feedback"
          [ngClass]="applyCssFeedback('description')"
        >
          Este campo é obrigatório
        </div>
      </div>

      <div class="form-group">
        <label for="slug" [ngClass]="applyCssFeedback('slug')">Slug</label>
        <input
          type="text"
          [ngClass]="applyCssFeedback('slug')"
          id="slug"
          name="slug"
          class="form-control"
          formControlName="slug"
          placeholder="slug"
          required
        />
        <div class="invalid-feedback">Este campo é obrigatório</div>
      </div>

      <div class="form-group">
        <label for="tags" [ngClass]="applyCssFeedback('tags')">Tags</label>
        <textarea
          name="tags"
          [ngClass]="applyCssFeedback('tags')"
          id="tags"
          class="form-control"
          formControlName="tags"
          cols="30"
          rows="10"
          required
        ></textarea>
        <div class="invalid-feedback">Este campo é obrigatório</div>
      </div>
    </form>
  </div>
  <div class="card-footer text-left">
    <button
      type="submit"
      class="btn btn-success float-right"
      (click)="onSubmit()"
    >
      Enviar
    </button>
  </div>
</div>

<div
  *ngIf="isModalShown"
  [config]="{ show: true }"
  (onHidden)="onHidden()"
  bsModal
  #autoShownModal="bs-modal"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-auto-name"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-warning">
        <h4 id="dialog-auto-name" class="modal-title pull-left text-center">
          Atenção.
        </h4>
      </div>
      <div class="modal-body">
        <p>
          Você está saindo do formulário. Todas as informações inseridas serão
          perdidas.
        </p>
        <p class="text-warning"><b>Você realmente deseja sair?</b></p>
        <hr />
        <button type="button" class="btn btn-secondary" (click)="hideModal()">
          Permanecer
        </button>
        <button
          type="button"
          [routerLink]="['/products']"
          class="btn btn-warning pull-right"
        >
          Sair da página
        </button>
      </div>
    </div>
  </div>
</div>
